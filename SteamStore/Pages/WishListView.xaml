<Page x:Class="SteamStore.Pages.WishListView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SteamStore.Pages"
        mc:Ignorable="d">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Search and Filter Controls -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
            <TextBox x:Name="SearchBox" Width="200" Height="30" 
                     Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     TextChanged="SearchBox_TextChanged"
                     Margin="0,0,10,0" PlaceholderText="Search games..."
                     Background="#2A2A2A"
                     Foreground="White"
                     BorderBrush="#444444"/>
            
            <ComboBox x:Name="FilterComboBox" Width="150" Height="30" 
                      SelectionChanged="FilterComboBox_SelectionChanged" 
                      Margin="0,0,10,0"
                      Background="#2A2A2A"
                      Foreground="White"
                      BorderBrush="#444444"
                      PlaceholderText="Filter by Rating">
                <ComboBox.Resources>
                    <ResourceDictionary>
                        <SolidColorBrush x:Key="ComboBoxBackgroundPointerOver" Color="#3A3A3A"/>
                        <SolidColorBrush x:Key="ComboBoxBackgroundPressed" Color="#1A1A1A"/>
                    </ResourceDictionary>
                </ComboBox.Resources>
                <ComboBoxItem Content="All Games" Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Overwhelmingly Positive (9+)" Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Very Positive (8-9)" Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Mixed (4-8)" Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Negative (&lt;4)" Foreground="White" Background="#2A2A2A"/>
            </ComboBox>
            
            <ComboBox x:Name="SortComboBox" Width="150" Height="30" 
                      SelectionChanged="SortComboBox_SelectionChanged"
                      Background="#2A2A2A"
                      Foreground="White"
                      BorderBrush="#444444"
                      PlaceholderText="Sort by...">
                <ComboBox.Resources>
                    <ResourceDictionary>
                        <SolidColorBrush x:Key="ComboBoxBackgroundPointerOver" Color="#3A3A3A"/>
                        <SolidColorBrush x:Key="ComboBoxBackgroundPressed" Color="#1A1A1A"/>
                    </ResourceDictionary>
                </ComboBox.Resources>
                <ComboBoxItem Content="Sort by..." Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Price (Low to High)" Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Price (High to Low)" Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Rating (High to Low)" Foreground="White" Background="#2A2A2A"/>
                <ComboBoxItem Content="Discount (High to Low)" Foreground="White" Background="#2A2A2A"/>
            </ComboBox>
        </StackPanel>

        <!-- Back Button -->
        <Button Grid.Row="1" 
                Content="Back to Store"
                HorizontalAlignment="Left"
                Margin="10,5,0,10"
                Click="BackButton_Click"
                Width="150" 
                Height="40"
                Background="#2A2A2A"
                BorderBrush="#444444"
                BorderThickness="1"
                Foreground="White"
                FontSize="14"
                FontWeight="SemiBold"
                CornerRadius="5">
            <Button.Resources>
                <ResourceDictionary>
                    <SolidColorBrush x:Key="ButtonBackgroundPointerOver" Color="#3A3A3A"/>
                    <SolidColorBrush x:Key="ButtonBackgroundPressed" Color="#1A1A1A"/>
                </ResourceDictionary>
            </Button.Resources>
        </Button>

        <!-- Games List -->
        <ScrollViewer Grid.Row="2" Margin="10">
            <ItemsControl ItemsSource="{Binding WishListGames}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="#444444" BorderThickness="1" Margin="0,0,0,10" 
                                Background="#2A2A2A" CornerRadius="5">
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Game Image -->
                                <Image Source="{Binding ImagePath}" Width="180" Height="100" 
                                       Stretch="UniformToFill"/>

                                <!-- Game Details -->
                                <StackPanel Grid.Column="1" Margin="10,0">
                                    <TextBlock Text="{Binding Name}" FontSize="18" 
                                               FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding Description}" 
                                               TextWrapping="Wrap" Margin="0,5" 
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <TextBlock Text="Rating: " Foreground="#CCCCCC"/>
                                        <TextBlock Text="{Binding Rating}" Foreground="#00FF00"/>
                                        <TextBlock Text=" | Price: $" Margin="10,0" 
                                                   Foreground="#CCCCCC"/>
                                        <TextBlock Text="{Binding Price}" Foreground="White"/>
                                        <TextBlock Text=" | Discount: " Margin="10,0" 
                                                   Foreground="#CCCCCC"/>
                                        <!-- Using a converter for the discount percentage -->
                                        <TextBlock Foreground="#FF6B6B">
                                            <Run Text="{Binding Discount}"/>
                                            <Run Text="%"/>
                                        </TextBlock>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Action Buttons -->
                                <StackPanel Grid.Column="2" Margin="10,0">
                                    <Button Content="View Details" Margin="0,0,0,5" 
                                            Click="ViewDetails_Click" Width="100"/>
                                    <Button Content="Remove" Background="#FF4444" 
                                            Click="RemoveFromWishlist_Click" Width="100"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page> 